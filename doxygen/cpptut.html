<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Partio: C++ Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Partio</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="cpptut">C++ Tutorial </a></h1><p>Here is a simple example of some operations supported by particles. You may want to look at the includes demo applications and tools in the source tree to see more examples.</p>
<h2>Intro</h2>
<p>The C++ API is easy to use. You just need to include </p>
<pre>
include &lt;<a class="el" href="Partio_8h.html">Partio.h</a>&gt;
</pre><p> Everything <a class="el" href="namespacePartio.html">Partio</a> related is in the <a class="el" href="namespacePartio.html">Partio</a> namespace. To read a particle file in and print the number of particles you could do: </p>
<pre>
<a class="el" href="classPartio_1_1ParticlesDataMutable.html" title="Particle Mutable Data Interface.">Partio::ParticlesDataMutable</a>* data=Partioread("test.bgeo");
std::cout&lt;&lt;"Number of particles "&lt;&lt;data-&gt;numParticles()&lt;&lt;std::endl;
</pre><p> Now we could additionally print out the names of all attributes in the particle file as </p>
<pre>
for(int i=0;i&lt;data-&gt;numAttributes();i++){
    <a class="el" href="classPartio_1_1ParticleAttribute.html" title="Particle Collection Interface.">Partio::ParticleAttribute</a> attr;
    data-&gt;attributeInfo(i,attr);
    std::cout&lt;&lt;"attribute["&lt;&lt;i&lt;&lt;"] is "&lt;&lt;attr.name&lt;&lt;std::endl;
}
</pre><p> Now we could convert the data into RenderMan ptc format as </p>
<pre>
<a class="el" href="namespacePartio.html#a6abf5b21c74a67efd65212ff2b94dad0">Partio::write</a>("test.ptc",*data);
</pre><p> Whenever you are done with a particle set you need to release it as </p>
<pre>
data-&gt;release();
</pre><h2>Simple processing</h2>
<p>Suppose we wanted to average all the positions in a particle file. We could do that by iterating over each particle and getting the position attribute value as follows: </p>
<pre>
<a class="el" href="classPartio_1_1ParticleAttribute.html" title="Particle Collection Interface.">Partio::ParticleAttribute</a> posAttr;
if(!data-&gt;attributeInfo("position",attr)
   || (attr.type != <a class="el" href="namespacePartio.html#a9e067eb423293e78e1677b38c24f92baab1756e82f0c015aaeafad084fff27f0a">Partio::FLOAT</a> &amp;&amp; attr.type != <a class="el" href="namespacePartio.html#a9e067eb423293e78e1677b38c24f92baa3653b9ab576961db52fa9c694044204d">Partio::VECTOR</a>)
   || attr.count != 3){
   std::cerr&lt;&lt;"Failed to get proper position attribute"&lt;&lt;std::endl;
}</pre><pre>float avg[3]={0,0,0};</pre><pre>for(int i=0;i&lt;data-&gt;numParticles();i++){
    float *pos=data-&gt;data&lt;float&gt;(posAttr,i);
    for(int k=0;k&lt;3;k++) avg[k]+=pos[k];
}
for(int k=0;k&lt;3;k++) pos[k]/=data-&gt;numParticles();
std::cerr&lt;&lt;"avg "&lt;&lt;pos[0]&lt;&lt;" "&lt;&lt;pos[1]&lt;&lt;" "&lt;&lt;pos[2]&lt;&lt;std::endl;
</pre> </div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 5 Apr 2011 for Partio by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
